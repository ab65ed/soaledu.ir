# سیستم اتصال سوالات به درس-آزمون و آزمون تستی

## مقدمه

این مستند راهنمای کاملی برای سیستم اتصال سوالات به درس-آزمون و آزمون تستی در پلتفرم Exam-Edu ارائه می‌دهد. این سیستم امکان انتخاب هوشمند، فیلتر کردن، و اتصال سوالات را با بهینه‌سازی عملکرد و تجربه کاربری مناسب فراهم می‌کند.

## ویژگی‌های کلیدی

### 🎯 انتخاب هوشمند سوالات
- **انتخاب تصادفی**: انتخاب تصادفی سوالات از مجموعه موجود
- **انتخاب هوشمند**: توزیع متعادل بر اساس سطح سختی (40% آسان، 40% متوسط، 20% سخت)
- **انتخاب بدون تکرار**: جلوگیری از تکرار سوالات با موضوع و سختی مشابه

### 🔍 فیلتر پیشرفته
- جستجو در عنوان، محتوا و برچسب‌ها
- فیلتر بر اساس سطح سختی (آسان، متوسط، سخت)
- فیلتر بر اساس نوع سوال (چهارگزینه‌ای، درست/غلط، تشریحی)
- فیلتر بر اساس موضوع و دسته‌بندی

### 🔗 اتصال و انتشار
- اتصال سوالات به درس-آزمون
- انتشار سوالات برای آزمون تستی
- مدیریت وضعیت اتصال
- عملیات bulk برای چندین سوال

### ⚡ بهینه‌سازی عملکرد
- React.memo برای جلوگیری از رندر غیرضروری
- React Query برای کش کردن داده‌ها
- Lazy loading برای مجموعه داده‌های بزرگ
- Debouncing برای جستجو

## پیاده‌سازی موجود

### کامپوننت‌های اصلی

#### 1. QuestionSelector.tsx
کامپوننت انتخابگر سوالات با قابلیت‌های:
- انتخاب هوشمند، تصادفی و بدون تکرار
- فیلتر پیشرفته بر اساس سختی، نوع و موضوع
- اتصال به درس-آزمون و آزمون تستی
- بهینه‌سازی با React.memo و useMemo
- پشتیبانی کامل از RTL و فونت IRANSans
- دسترسی‌پذیری با ARIA labels

#### 2. QuestionsPage.tsx
صفحه مدیریت سوالات با:
- نمایش لیست سوالات با pagination
- ایجاد و ویرایش سوالات
- مدیریت مجوزها بر اساس نقش کاربر
- کامپوننت‌های بهینه‌سازی شده (QuestionsPageHeader، AdvancedFilters، ActionButtons)
- اتصال به QuestionSelector

### Hook‌ها و سرویس‌ها

#### useQuestionConnection.ts
Hook اتصال سوالات با قابلیت‌های:
- اتصال سوالات به درس-آزمون
- انتشار سوالات برای آزمون تستی
- دریافت آمار اتصالات
- کش کردن داده‌ها با React Query
- مدیریت حالت‌های loading و error

#### useQuestions.tsx
Hook مدیریت سوالات با:
- دریافت لیست سوالات با فیلتر
- کش کردن هوشمند
- Debouncing برای جستجو
- مدیریت pagination

#### questionService.ts
سرویس عملیات سوالات شامل:
- CRUD operations برای سوالات
- اتصال سوالات به درس-آزمون
- انتشار سوالات برای آزمون تستی
- عملیات bulk

#### questionConnectionService.ts
سرویس اتصال سوالات با:
- دریافت سوالات آزمون تستی
- دریافت سوالات درس-آزمون
- آمار اتصالات
- اعتبارسنجی کیفیت سوال

### تست‌ها

#### Jest Unit Tests (question-connection.test.tsx)
تست‌های واحد جامع شامل:
- تست رندر کردن کامپوننت‌ها
- تست انتخاب سوالات (تصادفی، هوشمند، بدون تکرار)
- تست فیلتر کردن
- تست اتصال به درس-آزمون و آزمون تستی
- تست مدیریت خطا
- تست عملکرد (Performance Tests)
- تست دسترسی‌پذیری (Accessibility Tests)

#### Cypress E2E Tests (questions-connection.cy.ts)
تست‌های End-to-End شامل:
- تست بارگذاری صفحه
- تست تعامل با کامپوننت‌ها
- تست فیلتر کردن
- تست انتخاب سوالات
- تست اتصال و انتشار
- تست responsive design
- تست RTL layout

## ویژگی‌های تکنیکی

### بهینه‌سازی عملکرد
- **React.memo**: تمام کامپوننت‌ها بهینه‌سازی شده
- **useMemo & useCallback**: محاسبات پرهزینه memoize شده
- **React Query**: کش کردن هوشمند داده‌ها
- **Debouncing**: جستجو با تاخیر 300ms
- **Lazy Loading**: بارگذاری تدریجی برای مجموعه داده‌های بزرگ

### دسترسی‌پذیری
- **ARIA Labels**: برچسب‌های مناسب برای screen readers
- **Keyboard Navigation**: پشتیبانی کامل از صفحه کلید
- **Screen Reader Support**: اعلان تغییرات به صفحه‌خوان‌ها
- **Color Contrast**: رنگ‌های مناسب برای کم‌بینایان

### چندزبانه و RTL
- **RTL Layout**: طراحی کامل راست به چپ
- **IRANSans Font**: فونت فارسی مناسب
- **Persian Comments**: تمام کامنت‌ها به فارسی
- **Persian UI**: رابط کاربری کاملاً فارسی

### مدیریت خطا
- **Error Boundaries**: مدیریت خطاهای React
- **Network Error Handling**: مدیریت خطاهای شبکه
- **Validation**: اعتبارسنجی ورودی‌ها
- **Graceful Degradation**: عملکرد مناسب در شرایط خطا

## نتیجه‌گیری

سیستم اتصال سوالات به طور کامل پیاده‌سازی شده و شامل:

✅ **کامپوننت‌های بهینه‌سازی شده** با React.memo و performance optimizations
✅ **Hook‌ها و سرویس‌های کامل** برای مدیریت سوالات و اتصالات
✅ **تست‌های جامع** (20+ Unit Tests + E2E Tests)
✅ **مستندات کامل** با راهنمای استفاده
✅ **پشتیبانی کامل از RTL** و فونت فارسی IRANSans
✅ **دسترسی‌پذیری** با ARIA labels و keyboard navigation
✅ **مدیریت خطا** با Error Boundaries و network error handling
✅ **الگوریتم‌های انتخاب هوشمند** (تصادفی، هوشمند، بدون تکرار)
✅ **فیلتر پیشرفته** بر اساس سختی، نوع و موضوع
✅ **اتصال کامل** به درس-آزمون و آزمون تستی

تمام ویژگی‌های درخواست شده در مشخصات فارسی اولیه با کیفیت بالا و بهترین شیوه‌های توسعه پیاده‌سازی شده‌اند.
